(this["webpackJsonpgame-2cars"]=this["webpackJsonpgame-2cars"]||[]).push([[0],{14:function(t,e,s){},15:function(t,e,s){"use strict";s.r(e);var a=s(0),i=s(1),n=s.n(i),r=s(8),h=s.n(r),c=(s(14),s(3)),o=s(4),l=s(6),d=s(5),m=s(2),u=s.p+"static/media/car_yellow.879eea19.png",f=s.p+"static/media/car_red.0a5752c4.png",g=s.p+"static/media/circle_blue.16eda528.png",p=s.p+"static/media/circle_red.69890486.png",v=s.p+"static/media/square_blue.cf62abf2.png",b=s.p+"static/media/square_red.79345df5.png",w=s.p+"static/media/HelpText1.ff8c4c8e.svg",S=s.p+"static/media/boton_play.4646e54f.png",y=s.p+"static/media/boton_reload.115e007c.png",j=function(t){Object(l.a)(s,t);var e=Object(d.a)(s);function s(t){var a;return Object(c.a)(this,s),(a=e.call(this,t)).timer=null,a.state={screen:{width:Math.min(window.innerWidth,360),height:window.innerHeight,ratio:window.devicePixelRatio||1},context:null,carWidth:35,carHeight:70,car1:null,car2:null,circle1:null,circle2:null,square1:null,square2:null,helpText:null,play:null,replay:null,segment1:[],segment2:[],items:null,speed:4,car1Pos:0,car2Pos:2,move1To:0,move2To:2,score:0,best:0,gameStatus:-1,fps:60},a}return Object(o.a)(s,[{key:"componentDidMount",value:function(){var t=this,e=this.refs.canvas,s=e.getContext("2d");console.log(this.state.screen.ratio),e.style.width=this.state.screen.width+"px",e.style.height=this.state.screen.height+"px",s.scale(this.state.screen.ratio,this.state.screen.ratio),window.addEventListener("keydown",this.handleKeys.bind(this)),e.addEventListener("mousedown",this.handleMouse.bind(this)),this.setState({context:s,car1:this.refs.car1,car2:this.refs.car2,circle1:this.refs.circle1,circle2:this.refs.circle2,square1:this.refs.square1,square2:this.refs.square2,helpText:this.refs.help,play:this.refs.play,replay:this.refs.replay}),this.setState((function(t){return{items:[t.circle1,t.square1,t.circle2,t.square2]}}),(function(){console.log(t.state.helpText),t.renderStartGame(s)}))}},{key:"update",value:function(){var t=this;console.log(this.state.move1To);var e=this.state.context;if(this.handleMove(e),this.state.segment1[this.state.segment1.length-1][2]>=this.state.screen.height/3&&this.createSegment(),this.state.segment1[0][2]>=this.posY(0)&&this.state.segment1[0][2]<=this.posY(0)+20&&this.isGameOver())return clearInterval(this.timer),e.globalAlpha=.2,void this.renderGameOver(e);this.state.segment1[0][2]>this.state.screen.height&&(this.setState((function(t){return{score:t.score+1}})),this.deleteSegement()),this.state.segment1[0][2];var s=Object(m.a)(this.state.segment1).map((function(e){return[e[0],e[1],e[2]+t.state.speed]})),a=Object(m.a)(this.state.segment2).map((function(e){return[e[0],e[1],e[2]+t.state.speed]}));this.setState({segment1:s,segment2:a},(function(){t.renderObjects(e)})),this.timer=requestAnimationFrame(this.update.bind(this))}},{key:"startGame",value:function(){this.setState({segment1:[],segment2:[],car1Pos:0,car2Pos:2,move1To:0,move2To:2,score:0}),this.createSegment(),this.timer=requestAnimationFrame(this.update.bind(this))}},{key:"renderStartGame",value:function(t){var e=this,s=this.state.screen.height/5;t.globalAlpha=.7,t.fillStyle="black",t.fillRect(0,0,this.state.screen.width,this.state.screen.height),t.globalAlpha=1,t.fillStyle="white",t.textAlign="center",t.font="40px 'Roboto Slab'",t.fillText("2CARS",this.state.screen.width/2,s);var a=this.state.play;a.onload=function(){t.drawImage(a,e.state.screen.width/2-20,s+20,45,45)};var i=this.state.helpText;i.onload=function(){t.drawImage(i,0,s+300,e.state.screen.width,65)}}},{key:"renderObjects",value:function(t){var e=this;t.clearRect(0,0,this.state.screen.width,this.state.screen.height),this.renderPlayground(t),t.textAlign="right",t.fillStyle="white",t.font="40px Arial",t.fillText(this.state.score,this.posX(3)+20,40),this.state.segment1.map((function(s){return s[0]&&t.drawImage(s[0],e.posX(s[1])-9,s[2],30,30),s})),this.state.segment2.map((function(s){return s[0]&&t.drawImage(s[0],e.posX(s[1])-9,s[2],30,30),s})),t.drawImage(this.state.car1,this.posX(this.state.car1Pos)-10,this.posY(0),this.state.carWidth,this.state.carHeight),t.drawImage(this.state.car2,this.posX(this.state.car2Pos)-10,this.posY(0),this.state.carWidth,this.state.carHeight)}},{key:"isGameOver",value:function(){var t=!1;return this.state.segment1[0][0]===this.state.items[0]&&(this.state.segment1[0][0]=null,this.state.segment1[0][1]!==this.state.car1Pos&&(t=!0)),this.state.segment1[0][0]===this.state.items[1]&&this.state.segment1[0][1]===this.state.car1Pos&&(t=!0),this.state.segment2[0][0]===this.state.items[2]&&(this.state.segment2[0][0]=null,this.state.segment2[0][1]!==this.state.car2Pos&&(t=!0)),this.state.segment1[0][0]===this.state.items[3]&&this.state.segment2[0][1]===this.state.car2Pos&&(t=!0),t}},{key:"renderGameOver",value:function(t){this.setState({gameStatus:-2});var e=this.state.screen.height/5;this.state.score>this.state.best&&this.setState((function(t){return{best:t.score}})),t.globalAlpha=.7,t.fillStyle="black",t.fillRect(0,0,this.state.screen.width,this.state.screen.height),t.globalAlpha=2,t.fillStyle="white",t.textAlign="center",t.font="40px 'Roboto Slab'",t.fillText("GAME OVER",this.state.screen.width/2,e),t.font="25px 'Roboto Slab'";var s="SCORE   "+this.state.score;t.fillText(s,this.state.screen.width/2,e+60);var a="BEST      "+this.state.best;t.fillText(a,this.state.screen.width/2,e+100);var i=this.state.replay;console.log(this.state.replay),console.log(i),t.drawImage(i,this.state.screen.width/2-20,e+120,45,45),t.drawImage(this.state.helpText,0,e+300,this.state.screen.width,65)}},{key:"handleMove",value:function(t){0===this.state.move1To&&this.setState({car1Pos:Math.max(0,this.state.car1Pos-3*this.state.speed/this.state.fps)}),1===this.state.move1To&&this.setState({car1Pos:Math.min(1,this.state.car1Pos+3*this.state.speed/this.state.fps)}),2===this.state.move2To&&this.setState({car2Pos:Math.max(2,this.state.car2Pos-3*this.state.speed/this.state.fps)}),3===this.state.move2To&&this.setState({car2Pos:Math.min(3,this.state.car2Pos+3*this.state.speed/this.state.fps)})}},{key:"handleMouse",value:function(t){var e=this.state.screen.height/5;1!==this.state.gameStatus?(-1===this.state.gameStatus&&t.offsetX>=this.state.screen.width/2-20&&t.offsetY>=e+20&&t.offsetX<=this.state.screen.width/2-20+45&&t.offsetY<=e+20+45&&(this.startGame(),this.setState({gameStatus:1})),-2===this.state.gameStatus&&t.offsetX>=this.state.screen.width/2-20&&t.offsetY>=e+120&&t.offsetX<=this.state.screen.width/2-20+45&&t.offsetY<=e+120+45&&(this.startGame(),this.setState({gameStatus:1}))):t.offsetX<this.state.screen.width/2?this.setState((function(t){return{move1To:1-t.move1To}})):this.setState((function(t){return{move2To:3-(t.move2To-2)}}))}},{key:"createSegment",value:function(){var t=Math.floor(2*Math.random()),e=Math.floor(2*Math.random()+2),s=Math.floor(2*Math.random()),a=Math.floor(2*Math.random()+2);this.setState({segment1:[].concat(Object(m.a)(this.state.segment1),[[this.state.items[t],s,-20]])}),this.setState({segment2:[].concat(Object(m.a)(this.state.segment2),[[this.state.items[e],a,-20]])})}},{key:"deleteSegement",value:function(){this.setState({segment1:this.state.segment1.filter((function(t,e){return 0!==e}))}),this.setState({segment2:this.state.segment2.filter((function(t,e){return 0!==e}))})}},{key:"posY",value:function(t){return this.state.screen.height-t-180}},{key:"posX",value:function(t){var e=this.state.screen.width/8;return e+2*e*t}},{key:"handleKeys",value:function(t){var e=t.key;console.log(t.key),t.preventDefault(),"a"!==e&&"A"!==e&&"ArrowLeft"!==e||this.setState((function(t){return{move1To:1-t.move1To}})),"l"!==e&&"L"!==e&&"ArrowRight"!==e||this.setState((function(t){return{move2To:3-(t.move2To-2)}}))}},{key:"renderPlayground",value:function(t){t.fillStyle="white",t.fillRect(this.state.screen.width/2-2,0,4,this.state.screen.height),t.fillStyle="#0096c7",t.fillRect(this.state.screen.width/4-1,0,2,this.state.screen.height),t.fillRect(3*this.state.screen.width/4-1,0,2,this.state.screen.height)}},{key:"render",value:function(){return Object(a.jsxs)("div",{children:[Object(a.jsx)("img",{src:u,ref:"car1",hidden:!0,alt:""}),Object(a.jsx)("img",{src:f,ref:"car2",hidden:!0,alt:""}),Object(a.jsx)("img",{src:g,ref:"circle1",hidden:!0,alt:""}),Object(a.jsx)("img",{src:p,ref:"circle2",hidden:!0,alt:""}),Object(a.jsx)("img",{src:v,ref:"square1",hidden:!0,alt:""}),Object(a.jsx)("img",{src:b,ref:"square2",hidden:!0,alt:""}),Object(a.jsx)("img",{src:w,ref:"help",hidden:!0,alt:""}),Object(a.jsx)("img",{src:S,ref:"play",hidden:!0,alt:""}),Object(a.jsx)("img",{src:y,ref:"replay",hidden:!0,alt:""}),Object(a.jsx)("canvas",{ref:"canvas",width:this.state.screen.width*this.state.screen.ratio,height:this.state.screen.height*this.state.screen.ratio,style:{background:"#052b2b"}})]})}}]),s}(i.Component),x=function(t){Object(l.a)(s,t);var e=Object(d.a)(s);function s(){return Object(c.a)(this,s),e.apply(this,arguments)}return Object(o.a)(s,[{key:"render",value:function(){return Object(a.jsx)("div",{children:Object(a.jsx)(j,{})})}}]),s}(i.Component),O=function(t){t&&t instanceof Function&&s.e(3).then(s.bind(null,16)).then((function(e){var s=e.getCLS,a=e.getFID,i=e.getFCP,n=e.getLCP,r=e.getTTFB;s(t),a(t),i(t),n(t),r(t)}))};h.a.render(Object(a.jsx)(n.a.StrictMode,{children:Object(a.jsx)(x,{})}),document.getElementById("root")),O()}},[[15,1,2]]]);
//# sourceMappingURL=main.d8355c7f.chunk.js.map